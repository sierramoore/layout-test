(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{370:function(t,e,i){var r,n;!function(){"use strict";r=[i(3),i(48),i(24),i(85),i(28),i(35),i(37),i(25),i(23),i(78),i(38),i(36),i(86)],void 0===(n=function(t,e,i,r,n,o,s,a,c,h,d,u,l){t.initialize(),$(".js-product-display").data("single-product-mode")||e.attachTo(".js-bundle-button",{onMultiOverlay:!0}),i.attachTo(".js-login"),r.attachTo(document),n.attachTo(document),o.attachTo(document),s.attachTo(document),a.attachTo(document),c.attachTo(document),h.attachTo(document),d.attachTo(document),u.attachTo(document),l.attachTo(document)}.apply(e,r))||(t.exports=n)}()},85:function(t,e,i){var r,n;function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";r=[i(1),i(29)],void 0===(n=function(t,e){return t(function(){this.defaultAttrs({bundleToolTipSelector:".js-bundle-tool-tip",externalLinkSelector:"a:not(.js-logout-link):not(.js-preview-link)[href]",footerSelector:".js-footer",loginSelector:".js-login",productContainerSelector:".js-product-row",productDisplaySelector:".js-product-display",productListSelector:".js-bundled-product-list",productSelector:".js-product",bundleHeightSpacing:50,bundleWidthSpacing:50,isMinimized:!0,productParams:{},validDurationParams:["monthly","quarterly","biannually","yearly"],validOtherParams:["permalink","offerCodeName","locale","wanted","email","gift","recommended_by","url_parameters"]}),this.addTargetsToLinks=function(){this.select("externalLinkSelector").attr("target","_blank")},this.cancelCheckout=function(){this.attr.checkingOut=!1,$("body").removeClass("checking-out showing-bundle"),this.shrinkToBundle()},this.clickListener=function(t){if(!this.attr.checkingOut){for(var e=$(t.target||t.srcElement),i=["buy-form-main","buyer-bar-container","product-row"],r=0;r<i.length;r++){var n=i[r];if(e.hasClass(n)||e.parents("."+n).length>0)return}this.attr.completedPurchase?this.minimize():this.shrinkToBundle()}},this.completePurchase=function(t,e){this.attr.checkingOut=!1,this.attr.completedPurchase=!0,this.notifyGoogleAnalyticsOfPurchase(e)},this.getBundleWidth=function(){return parseInt(this.select("bundleToolTipSelector").outerWidth())+this.attr.bundleWidthSpacing},this.getBundleHeight=function(){var t=this.select("bundleToolTipSelector");return parseInt(t.outerHeight())+parseInt(t.css("margin-top")||0)+parseInt(t.css("margin-bottom")||0)+parseInt(t.css("top")||0)+this.attr.bundleHeightSpacing},this.getPersistentBundle=function(){this.trigger("uiNeedsToGetPersistentBundle")},this.getProduct=function(t){this.attr.productParams={},this.attr.userGoogleAnalyticsClientId=t.googleAnalyticsClientId;for(var e=0;e<this.attr.validParams.length;e++){var i=this.attr.validParams[e],r=t[i];r&&"false"!==r.toString().toLowerCase()&&(this.attr.productParams[i]=r)}this.setPaymentOption(),this.trigger(document,"uiNeedsAProduct",this.attr.productParams)},this.gotMessage=function(t){var e={};if(t.data)try{e=JSON.parse(t.data)}catch(t){}e.overlayMethod&&this[e.overlayMethod]&&this[e.overlayMethod](e.overlayArgs)},this.keyListener=function(t){27===t.keyCode&&(t.stopPropagation(),this.minimize())},this.maximize=function(){this.sendMessageToParent({parentMethod:"maximizeIframe"})},this.maximizeCallback=function(){this.refreshPreview(),this.attr.isMinimized=!1,$("body").removeClass("gumroad-minimized"),this.select("productContainerSelector").addClass("showing"),this.trigger("uiNeedsToShowProductCountInCircle"),setTimeout(function(){this.refreshPreview()}.bind(this),300)},this.minimize=function(t){var e={parentMethod:"minimizeIframe"};if(t&&t.minimizeDimensions)e.parentArgs=t.minimizeDimensions;else if(this.attr.checkingOut)return;$("body").addClass("gumroad-minimized"),this.select("productContainerSelector").addClass("not-showing"),this.trigger("uiNeedsToPauseVideo"),setTimeout(function(){this.sendMessageToParent(e)}.bind(this),300)},this.minimizeCallback=function(){$("body").addClass("gumroad-minimized"),this.select("productContainerSelector").width(0)},this.notifyGoogleAnalyticsOfPurchase=function(t){this.trigger("uiNeedsToTrackActivityWithSellerGoogleAnalytics",{permalink:t.permalink,action:"purchased",value:(Number(t.non_formatted_price)*(this.attr.isSingleUnit?1:100)).toString()}),this.trigger("uiNeedsToTrackECommerceEventWithSellerGoogleAnalytics",{permalink:t.permalink,purchase_external_id:t.id,currency:t.currency_type&&t.currency_type.toUpperCase(),product_name:t.name,price:t.non_formatted_price,quantity:t.quantity,tax:t.non_formatted_seller_tax_amount})},this.prepareProduct=function(t,i){this.removeProduct(),this.select("productDisplaySelector").html(i.html),this.select("productSelector").addClass("relative popped"),e.attachTo(this.attr.productContainerSelector,{incrementViewCountOnInit:!0,isMobile:this.attr.isMobile,isMultiBuyEnabled:!this.attr.singleProductMode,onUserProfile:!this.attr.singleProductMode,overlayOfferCode:this.attr.productParams.offerCodeName,overlayPaymentOption:this.attr.paymentOption,overlayRecommendedBy:this.attr.productParams.recommended_by,overlayUrlParams:this.attr.productParams.url_parameters,permalink:this.attr.productParams.permalink,userInfoToAdd:this.attr.user,wantThis:this.attr.productParams.wanted,isOverlay:!0,userGoogleAnalyticsClientId:this.attr.userGoogleAnalyticsClientId}),this.showProduct()},this.productsInBundle=function(){var t=[];return this.select("productListSelector").find("li").each(function(e,i){t.push($(i).data("unique-permalink"))}),t},this.redirect=function(t,e){this.sendMessageToParent({parentMethod:"redirect",parentArgs:e.url})},this.refreshPreview=function(){this.trigger(document,"showPreview")},this.removeProduct=function(){e.teardownAll(),this.select("productDisplaySelector").empty()},this.resizeCheckoutArea=function(){this.attr.isMinimized&&this.shrinkToBundle()},this.sendMessageToParent=function(t){this.overlayParentDomain&&("object"===o(t)&&(t=JSON.stringify(t)),window.parent.postMessage(t,this.overlayParentDomain))},this.setIsSingleLink=function(){this.attr.isSingleLink=!0},this.setOverlayParentDomain=function(t){this.overlayParentDomain=t,this.sendMessageToParent({parentMethod:"handshake"})},this.setPaymentOption=function(){for(var t=0;t<this.attr.validDurationParams.length;t++){var e=this.attr.validDurationParams[t];this.attr.productParams[e]&&(this.attr.paymentOption=e)}},this.showPaymentFormIfWanted=function(){this.attr.productParams.wanted&&this.trigger("uiShowOverlayCreditCardForm")},this.showProduct=function(){this.trigger("uiTriggerECommerceView"),this.select("footerSelector").toggle(!this.select("productContainerSelector").data("custom-web-branding")),this.attr.productParams.wanted?this.trigger("uiShowPaymentForm"):this.maximize()},this.shrinkToBundle=function(){if(this.attr.isSingleLink)this.minimize();else{var t=null,e="100%";this.getBundleWidth();this.attr.checkingOut?this.select("loginSelector").css("height","100%"):(e=this.getBundleHeight()+"px",this.select("loginSelector").css("height",this.getBundleHeight()+"px")),this.productsInBundle().length>0&&(t={minimizeDimensions:{width:this.getBundleWidth()+"px",height:e}}),this.minimize(t)}},this.startCheckout=function(){"true"===$('meta[property="gr:paypal:pay_with_paypal_enabled"]').attr("value")&&this.trigger("uiNeedsBraintreeClientTokenFetched",{isOverlay:this.attr.isOverlay,isMultiBuyEnabled:this.attr.onMultiOverlay||this.attr.isMultiBuyEnabled}),this.attr.checkingOut=!0,$("body").addClass("showing-bundle checking-out"),this.shrinkToBundle()},this.after("initialize",function(){this.attr.validParams=this.attr.validDurationParams.concat(this.attr.validOtherParams),this.attr.singleProductMode=$(".js-product-display").data("single-product-mode"),$("body").addClass("gumroad-minimized"),window.addEventListener?window.addEventListener("message",function(t){this.gotMessage(t)}.bind(this),!1):window.attachEvent&&window.attachEvent("onmessage",function(t){this.gotMessage(t)}.bind(this),!1),this.addTargetsToLinks(),this.trigger(document,"uiSetOverlayPageShareUrl",{url:this.select("productDisplaySelector").data("overlay-share-url")}),this.on(document,"dataGotAProduct",this.prepareProduct),this.on(document,"uiBundledProductPaymentFailed",this.completePurchase),this.on(document,"uiBundledProductPaymentCompleted",this.completePurchase),this.on(document,"uiCanShowPaymentForm",this.showPaymentFormIfWanted),this.on(document,"uiCannotShowPaymentForm",this.maximize),this.on(document,"uiNeedsToHideProductOverlay",this.shrinkToBundle),this.on(document,"uiNeedsToCancelBundleCheckout",this.cancelCheckout),this.on(document,"uiNeedsToStartBundleCheckout",this.startCheckout),this.on(document,"uiResizeCheckoutArea",this.resizeCheckoutArea),this.on(document,"uiNeedsToRedirectOverlayFromReceipt",this.redirect),this.on(document,"keydown",this.keyListener),this.on(document,"click",this.clickListener)})})}.apply(e,r))||(t.exports=n)}()}},[[370,1,0]]]);
//# sourceMappingURL=overlay-9f1a1fce63c24fde3198.chunk.js.map